import React, { useState } from 'react';

const FacturesImpayees = () => {
  const columns = [
    "N°",
    "HOTELS ",
    "RIB",
    "ZONES",
    "SEJOUR(S)",
    "LIT(S)",
    "NBRE DE PERSONNES",
    "PRIX UNITAIRE HEBERGEMENT\r\n(ARIARY)",
    "COÛT \r\nHEBERGEMENT\r\n(ARIARY)",
    "NBRE DE PLATS",
    "PRIX UNITAIRE PLATS\r\n(ARIARY)",
    "COÛT \r\nRESTAURATION\r\n(ARIARY)",
    "COÛT \r\nPROFORMA\r\n(ARIARY)",
    "COÛT \r\nFACTURE\r\n(ARIARY)",
    "Ecart\r\nentre Facture et Proforma",
    "N°FACTURE",
    "1 ère ACOMPTES (35%)\r\n(ARIARY)",
    "RECEPTION \r\nFACTURE\r\n1ère ACOMPTES ",
    "\r\nCONTRÔLE\r\nPIECE\r\n1ère ACOMPTES ",
    "VALIDATION\r\nPAIEMENT\r\n1ère ACOMPTES ",
    "PAIEMENT\r\n1ère ACOMPTES ",
    "2ème ACOMPTES (35%)\r\n(ARIARY)",
    "RECEPTION \r\nFACTURE\r\n2ème ACOMPTES ",
    "\r\nCONTRÔLE\r\nPIECE\r\n2ème ACOMPTES ",
    "VALIDATION\r\nPAIEMENT\r\n2ème ACOMPTES ",
    "PAIEMENT\r\n2ème ACOMPTES ",
    "RESTES \r\nA PAYER \r\n(30%)\r\n(ARIARY)",
    "RECEPTION \r\nFACTURE\r\nRAP ",
    "\r\nCONTRÔLE\r\nPIECE\r\nRAP ",
    "VALIDATION\r\nPAIEMENT\r\nRAP ",
    "PAIEMENT\r\nRAP "
  ]
  const rows = [
   
      [
        1,
        "HOTEL VAHINY",
        "00008 00016 05003018238 35",
        "AMPANDRANA",
        16,
        18,
        18,
        "-",
        "-",
        "-",
        "-",
        "-",
        25920000,
        25920000,
        0,
        "01-07/2023/SEHV",
        9072000,
        null,
        null,
        null,
        null,
        9072000,
        null,
        null,
        null,
        null,
        7776000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        2,
        "HOTEL 15 HEURES",
        "00005 00004 62408520100 32",
        "ANDOHAN'I MANDROSEZA",
        17,
        19,
        38,
        "-",
        "-",
        "-",
        "-",
        "-",
        20553600,
        20553600,
        0,
        230712,
        7193760,
        null,
        null,
        null,
        null,
        7193760,
        null,
        null,
        null,
        null,
        6166080,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        3,
        "BIG BANG",
        "00013 00011 23919437311 67",
        "BEHORIRIKA",
        16,
        42,
        47,
        "-",
        "-",
        "-",
        "-",
        "-",
        67600000,
        67600000,
        0,
        "FD/COJI/0907/SDR",
        23660000,
        null,
        null,
        null,
        null,
        23660000,
        null,
        null,
        null,
        null,
        20280000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        4,
        "ANOUK HOTEL",
        "00005 00001 70091130001 01",
        "TALATAMATY - IVATO",
        16,
        18,
        18,
        "-",
        "-",
        "-",
        "-",
        "-",
        34320000,
        34320000,
        0,
        15288,
        12012000,
        null,
        null,
        null,
        null,
        12012000,
        null,
        null,
        null,
        null,
        10296000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        5,
        "CASTELLO MOTEL",
        "00005 00001 10330480100 70",
        "ANOSIZATO",
        17,
        73,
        93,
        "-",
        "-",
        "-",
        "-",
        "-",
        71553000,
        71553000,
        0,
        "020/2023",
        25043550,
        null,
        null,
        null,
        null,
        25043550,
        null,
        null,
        null,
        null,
        21465900,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        6,
        "ARISOA HOTEL ",
        "00009 05065 19061450009 75",
        "BY-PASS",
        16,
        21,
        21,
        "-",
        "-",
        "-",
        "-",
        "-",
        84880000,
        84880000,
        0,
        "017-07/2023/ARI",
        29707999.999999996,
        null,
        null,
        null,
        null,
        29707999.999999996,
        null,
        null,
        null,
        null,
        25464000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        7,
        "ORCHID HOTEL",
        "00009 05604 23545230004 32",
        "IVATO - MANDROSOA",
        16,
        45,
        60,
        "-",
        "-",
        "-",
        "-",
        "-",
        56700000,
        56700000,
        0,
        "014/23",
        19845000,
        null,
        null,
        null,
        null,
        19845000,
        null,
        null,
        null,
        null,
        17010000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        8,
        "LE RIAD MEDINA TANA",
        "00008 00005 05003015795 60",
        "ISORAKA",
        17,
        9,
        9,
        "-",
        "-",
        "-",
        "-",
        "-",
        15300000,
        15300000,
        0,
        "2023/LRDM/0190",
        5355000,
        null,
        null,
        null,
        null,
        5355000,
        null,
        null,
        null,
        null,
        4590000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        9,
        "MIA DOLCE VITA (SOA&CO)",
        "00005 00011 71574440001 44",
        "AMBOHIMANAGAKELY",
        16,
        13,
        13,
        "-",
        "-",
        "-",
        "-",
        "-",
        33168000,
        33168000,
        0,
        "041PRO/2023",
        11608800,
        null,
        null,
        null,
        null,
        11608800,
        null,
        null,
        null,
        null,
        9950400,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        10,
        "SAKAY ROUGE",
        "00009 05065 21685600008 44",
        "ITAOSY - ANTANIMENAKELY",
        16,
        15,
        22,
        "-",
        "-",
        "-",
        "-",
        "-",
        19488000,
        19488000,
        0,
        "14SR/FACT/2023",
        6820800,
        null,
        null,
        null,
        null,
        6820800,
        null,
        null,
        null,
        null,
        5846400,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        11,
        "HOTEL LE VANILLIER",
        "00008 00004 05003011941 94",
        "ANDOHATAPENAKA",
        16,
        48,
        48,
        "-",
        "-",
        "-",
        "-",
        "-",
        38420000,
        38420000,
        0,
        0,
        13447000,
        null,
        null,
        null,
        null,
        13447000,
        null,
        null,
        null,
        null,
        11526000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        12,
        "NOTRE DAME DE CENACLE AMBOHIPO",
        "00004 00001 07223600180 32",
        "AMBOHIPO",
        16,
        96,
        117,
        "-",
        "-",
        "-",
        "-",
        "-",
        73336000,
        73336000,
        0,
        0,
        25667600,
        null,
        null,
        null,
        null,
        25667600,
        null,
        null,
        null,
        null,
        22000800,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        13,
        "IRA HOTEL",
        "00005 00001 70776580001 46",
        "ISORAKA",
        16,
        23,
        27,
        "-",
        "-",
        "-",
        "-",
        "-",
        23232000,
        23232000,
        0,
        "FC/7405",
        8131199.999999999,
        null,
        null,
        null,
        null,
        8131199.999999999,
        null,
        null,
        null,
        null,
        6969600,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        14,
        "LE CHÂTEAU D'AMBOHIMALAZA",
        "00005 00011 23309230100 97",
        "AMBOHIMALAZA",
        16,
        20,
        24,
        "-",
        "-",
        "-",
        "-",
        "-",
        28640000,
        28640000,
        0,
        "26/23",
        10024000,
        null,
        null,
        null,
        null,
        10024000,
        null,
        null,
        null,
        null,
        8592000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        15,
        "L'APPART",
        "00005 00093 70884980001 90",
        "BEHORIRIKA",
        16,
        35,
        62,
        "-",
        "-",
        "-",
        "-",
        "-",
        56304000,
        56304000,
        0,
        0,
        19706400,
        null,
        null,
        null,
        null,
        19706400,
        null,
        null,
        null,
        null,
        16891200,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        16,
        "RELAIS DE LA HAUTE VILLE",
        "00005 00001 28243380100 22",
        "AMBOHIMANORO - ANJOHY",
        16,
        13,
        21,
        "-",
        "-",
        "-",
        "-",
        "-",
        12480000,
        12480000,
        0,
        "104/NR/23",
        4368000,
        null,
        null,
        null,
        null,
        4368000,
        null,
        null,
        null,
        null,
        3744000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        17,
        "SOOATEL",
        "PAIEMENT EN ESPECE",
        "BOULEVARD DE L'EUROPE",
        16,
        42,
        42,
        "-",
        "-",
        "-",
        "-",
        "-",
        63840000,
        63840000,
        0,
        "01",
        22344000,
        null,
        null,
        null,
        null,
        22344000,
        null,
        null,
        null,
        null,
        19152000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        18,
        "PINAH HOTEL",
        "PAIEMENT EN ESPECE",
        "67 HA",
        16,
        24,
        35,
        "-",
        "-",
        "-",
        "-",
        "-",
        27438000,
        27438000,
        0,
        0,
        9603300,
        null,
        null,
        null,
        null,
        9603300,
        null,
        null,
        null,
        null,
        8231400,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        19,
        "HOTEL THREE \"T\" Bypass",
        "PAIEMENT EN ESPECES",
        "BY-PASS",
        16,
        21,
        23,
        "-",
        "-",
        "-",
        "-",
        "-",
        47475000,
        47475000,
        0,
        "075/23",
        16616249.999999998,
        null,
        null,
        null,
        null,
        16616249.999999998,
        null,
        null,
        null,
        null,
        14242500,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        20,
        "HOTEL FANANTENANA",
        "PAIEMENT EN ESPECES",
        "NANISANA",
        16,
        12,
        16,
        "-",
        "-",
        "-",
        "-",
        "-",
        13888000,
        13888000,
        0,
        "000022",
        4860800,
        null,
        null,
        null,
        null,
        4860800,
        null,
        null,
        null,
        null,
        4166400,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        21,
        "HOTEL GREGOIRE",
        "00006 00001 00000054003 14",
        "BESARETY",
        16,
        40,
        40,
        "-",
        "-",
        "-",
        "-",
        "-",
        82576000,
        82576000,
        0,
        "23.043/HG",
        28901600,
        null,
        null,
        null,
        null,
        28901600,
        null,
        null,
        null,
        null,
        24772800,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        22,
        "HOTEL DES CYGNES",
        "00004 00005 02003500152 32",
        "IVATO",
        17,
        14,
        14,
        "-",
        "-",
        "-",
        "-",
        "-",
        33320000,
        33320000,
        0,
        "0689/HRLESCYGNES/23",
        11662000,
        null,
        null,
        null,
        null,
        11662000,
        null,
        null,
        null,
        null,
        9996000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        23,
        "SKY BLUE",
        "00008 00020 05003016566 44",
        "AMBOHIMANAMBOLA",
        16,
        40,
        51,
        "-",
        "-",
        "-",
        "-",
        "-",
        69920000,
        69920000,
        0,
        458,
        24472000,
        null,
        null,
        null,
        null,
        24472000,
        null,
        null,
        null,
        null,
        20976000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        24,
        "HUMAN HOTEL",
        "00005 00087 71122970002 35",
        "IVATO",
        16,
        14,
        14,
        "-",
        "-",
        "-",
        "-",
        "-",
        28640000,
        28640000,
        0,
        3958,
        10024000,
        null,
        null,
        null,
        null,
        10024000,
        null,
        null,
        null,
        null,
        8592000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        25,
        "LA CASA DI LUNA",
        "00005 00067 71608490001 01",
        "ANKORONDRANO",
        17,
        20,
        20,
        "-",
        "-",
        "-",
        "-",
        "-",
        20366000,
        23732000,
        3366000,
        "852/23",
        8306199.999999999,
        null,
        null,
        null,
        null,
        8306199.999999999,
        null,
        null,
        null,
        null,
        7119600,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        26,
        "ANALAMANGA PARK",
        "00008 00007 05004000134 81",
        "AMBOANJOBE - ROUTE RN7 ",
        15,
        70,
        70,
        "-",
        "-",
        "-",
        "-",
        "-",
        30200000,
        30200000,
        0,
        "FACT/REG/AP687",
        10570000,
        null,
        null,
        null,
        null,
        10570000,
        null,
        null,
        null,
        null,
        10860000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        27,
        "LE MIRADOR",
        "00009 05600 23989330006 33",
        "TSARALALANA",
        16,
        31,
        31,
        "-",
        "-",
        "-",
        "-",
        "-",
        19940000,
        19940000,
        0,
        0,
        6979000,
        null,
        null,
        null,
        null,
        6979000,
        null,
        null,
        null,
        null,
        5982000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        28,
        "HOTEL SAINT PIERRE",
        "00005 00002 21682500100 49",
        "ANALAKELY - SOARANO",
        16,
        18,
        18,
        "-",
        "-",
        "-",
        "-",
        "-",
        17824000,
        17824000,
        0,
        202307035,
        6238400,
        null,
        null,
        null,
        null,
        6238400,
        null,
        null,
        null,
        null,
        5347200,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        29,
        "SUITES AUX CHARMES (VIP)",
        "00005 00008 73439480001 42",
        "ANDOHALO",
        13,
        5,
        5,
        "-",
        "-",
        "-",
        "-",
        "-",
        42020920,
        42020920,
        0,
        "001-07/AM-23",
        14707321.999999998,
        null,
        null,
        null,
        null,
        14707321.999999998,
        null,
        null,
        null,
        null,
        12606276,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        30,
        "NOVA HOTEL",
        "00009 05604 11683020001 63",
        "IVATO - MANDROSOA",
        17,
        18,
        28,
        "-",
        "-",
        "-",
        "-",
        "-",
        87720000,
        87720000,
        0,
        0,
        30701999.999999996,
        null,
        null,
        null,
        null,
        30701999.999999996,
        null,
        null,
        null,
        null,
        26316000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        31,
        "TINAY LODGE",
        "00009 05005 18500610005 18",
        "AMBOHIMALAZA",
        16,
        15,
        15,
        "-",
        "-",
        "-",
        "-",
        "-",
        21600000,
        21600000,
        0,
        "72/23",
        7559999.999999999,
        null,
        null,
        null,
        null,
        7559999.999999999,
        null,
        null,
        null,
        null,
        6480000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        32,
        "CALLISTEMON",
        "00005 00050 41199470200 12",
        "IVATO AEROPORT",
        16,
        15,
        15,
        "-",
        "-",
        "-",
        "-",
        "-",
        47360000,
        47360000,
        0,
        "0001-2023",
        16575999.999999998,
        null,
        null,
        null,
        null,
        16575999.999999998,
        null,
        null,
        null,
        null,
        14208000,
        "-",
        "-",
        "-",
        "-"
      ],
      [
        33,
        "LE CARAT",
        "00008 00006 05003010273 24",
        "AMBATOFOTSY",
        16,
        79,
        79,
        "-",
        "-",
        "-",
        "-",
        "-",
        47040000,
        47040000,
        0,
        "23138 P",
        16463999.999999998,
        null,
        null,
        null,
        null,
        16463999.999999998,
        null,
        null,
        null,
        null,
        14112000,
        "-",
        "-",
        "-",
        "-"
      ]
  ];

  const [checkboxStates, setCheckboxStates] = useState(
    rows.map(row => row.map(() => false))
  );

  const handleCheckboxChange = (rowIndex, cellIndex) => {
    const updatedCheckboxStates = checkboxStates.map((row, rIndex) =>
      rIndex === rowIndex ? row.map((cell, cIndex) => (cIndex === cellIndex ? !cell : cell)) : row
    );
    setCheckboxStates(updatedCheckboxStates);
  };

  const [expanded, setExpanded] = useState(false);
  const [currentIndex, setCurrentIndex] = useState(0);

  const columnRanges = [
    { start: 0, end: 6 },
    { start: 7, end: 15 },
    { start: 16, end: 25 },
    { start: 26, end: 30 }
  ]; // Personnalisez les plages de colonnes ici

  const visibleColumns = columns.slice(columnRanges[currentIndex].start, columnRanges[currentIndex].end + 1);

  const [rowsToShow, setRowsToShow] = useState(
    rows.map(row =>
      row.slice(columnRanges[currentIndex].start, columnRanges[currentIndex].end + 1)
    )
  );

  const showNextColumns = () => {
    const nextIndex = currentIndex + 1;
    if (nextIndex < columnRanges.length) {
      setCurrentIndex(nextIndex);
      setCheckboxStates(rows.map(row => row.map(() => false))); // Réinitialiser les états des cases à cocher
      const newRowsToShow = rows.map(row =>
        row.slice(columnRanges[nextIndex].start, columnRanges[nextIndex].end + 1)
      );
      setRowsToShow(newRowsToShow);
    }
  };
  const showPreviousColumns = () => {
    const previousIndex = currentIndex - 1;
    if (previousIndex >= 0) {
      setCurrentIndex(previousIndex);
      setCheckboxStates(rows.map(row => row.map(() => false))); // Réinitialiser les états des cases à cocher
      const newRowsToShow = rows.map(row =>
        row.slice(columnRanges[previousIndex].start, columnRanges[previousIndex].end + 1)
      );
      setRowsToShow(newRowsToShow);
    }
  };

  const expandButtonStyle = {
    cursor: 'pointer',
    backgroundColor: expanded ? '#7d240c' : '#973116',
    color: 'white',
    padding: '5px 10px',
    borderRadius: '5px',
    transition: 'background-color 0.3s ease',
  };

  const tableStyle = {
    width: '100%',
    borderCollapse: 'collapse',
    borderRadius: '5px',
    boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',
  };

  const thStyle = {
    padding: '10px',
    textAlign: 'left',
    border: '1px solid #ddd',
    backgroundColor: '#f5f5f5',
  };

  const tdStyle = {
    padding: '10px',
    textAlign: 'left',
    border: '1px solid #ddd',
  };
  const buttonStyle2 = {
    backgroundColor: expanded ? '#7d240c' : '#973116',
    color: 'white',
    border: 'none',
    float: 'right',
    borderRadius: '5px',
    cursor: 'pointer',
    transition: 'background-color 0.3s ease',
    marginRight: '10px'
  };
  return (
    <div>
      <button
        style={expandButtonStyle}
        onClick={() => setExpanded(!expanded)}
      >
        {expanded ? '-' : '+'} {expanded ? 'Réduire' : 'Afficher plus de détails'}
      </button>
      {expanded && (
        <>
          
          <button style={buttonStyle2} onClick={showNextColumns}>Suivants</button>
          <button style={buttonStyle2} onClick={showPreviousColumns}>Précédents</button>
          <table style={tableStyle}>
            <thead>
              <tr>
                {visibleColumns.map((column, index) => (
                  <th key={index} style={{ ...thStyle, textAlign: 'center' }}>
                    {column}
                  </th>
                ))}
              </tr>
            </thead>
            <tbody>
              {rowsToShow.map((row, rowIndex) => (
                <tr key={rowIndex}>
                  {row.map((cell, cellIndex) => (
                    <td key={cellIndex} style={{ ...tdStyle, textAlign: typeof cell === 'number' ? 'center' : 'center' }}>
                      {(rowIndex >= 1 && rowIndex <= 83) &&
                        ((cellIndex >= 17 && cellIndex <= 20) ||
                          (cellIndex >= 22 && cellIndex <= 25) ||
                          (cellIndex >= 27 && cellIndex <= 30)) ? (
                        <>
                          <input
                            type="checkbox"
                            checked={checkboxStates[rowIndex][cellIndex]}
                            onChange={() => handleCheckboxChange(rowIndex, cellIndex)}
                          />
                          {cell}
                        </>
                      ) : (
                        typeof cell === 'number'
                          ? cell.toLocaleString()
                          : cell
                      )}
                    </td>
                  ))}
                </tr>
              ))}
            </tbody>
          </table>
        </>
      )}
    </div>
  );

};

export default FacturesImpayees;
